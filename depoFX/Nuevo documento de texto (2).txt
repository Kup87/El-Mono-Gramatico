claro el tema de agregar carrito con la catidad es como crear un item nuevo, si?

ahora toma el item en tu caso el libro y la candidad, va a ser como un nuevo objeto dentro del array del carrito.

Entonces en tu funcion de agregar al carrito tenemos que tomar 2 parametros item y quantity como te pide la funcion, quantity es lo que te va a venir del contador y luego el item entero.



En context van a estar todas tus funciones con respecto al carrito, vos podes tener funciones todas separadas:



 const [cart, setCart] = useState([])



    const agregarAlCarrito = (item) => {

      setCart( [...cart, item] )

    }



    const isInCart = (id) => {

      return cart.some((prod) => prod.id === id)

    }



    const cantidadCart = () => {

      return cart.reduce((acc, prod) => acc + prod.cantidad, 0)

    }



    const totalCart = () => {

      return cart.reduce((acc, prod) => acc + prod.cantidad * prod.precio, 0)

    }



    const vaciarCart = () => {

        setCart([])

    }



    const eliminarItem = (id) => {

        setCart( cart.filter((prod) => prod.id !== id) )

    }





o podes analizar todo dentro de una funcion que es lo q recomiento:



const addItem = (item, quantity) => {

    const itemIsInCart = cart.some((order) => order.item.id === item.id);

    if (itemIsInCart) {

      // Modificar la cantidad

      const updatedCart = cart.map((order) => {

        if (order.item.id === item.id) {

          return { ...order, quantity: quantity + order.quantity };

        } else {

          return order;

        }

      });

      setCart(updatedCart);

    } else {

      // Agregar nuevo elemento

      setCart((prev) => [...prev, { item, quantity }]);

    }

  };



  const removeItem = (id) => {

    setCart((prev) => prev.filter((element) => element.item.id !== id));

  };



  const clearAll = () => {

    setCart([]);

  };



Entoncea analizas que item se agrega y si existe que modifique la cantidad. y no lo repita. 



No se si te maree mucho con los codigos XD sino hacemos un videito no hay drama